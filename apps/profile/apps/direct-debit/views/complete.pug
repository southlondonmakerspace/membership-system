extends /src/views/base.pug

block prepend title
	- title = 'Update contribution'

block contents
	.row
		.col-md-3
			- page = 'direct-debit'
			include /apps/profile/views/partials/sidebar.pug
		.col-md-9.col-lg-7
			+page_header( 'Update contribution' )
			if pending_update.amount
				.alert.alert-info
					| You have updated your contribution and will be charged
					| £#{ pending_update.amount } from
					| #{ moment( pending_update.date ).format('DD/MM/YYYY') }
			if amount
				p You currently contribute £#{ amount }/#{ period }.
			p
				| You can change the amount here, however
				| to change your contribution period please contact
				|
				a(href='mailto:' + Options( 'membership-support-email' )) membership support
				| .
			form( method='post', action='/profile/direct-debit/update-subscription').form-horizontal
				+csrf

				.form-group
					label( for='amount' ).col-md-3.control-label Amount
					.input-group.col-md-4
						span.input-group-addon £
						input( type='number', name='amount', id='amount', value=pending_update.amount || amount, required, min=1, step=1 ).form-control

				.form-group
					label.col-md-3.control-label Period
					.col-md-4
						input( type='text', readonly, disabled, value=period ).form-control

				button.btn.join-btn Update contribution

			h3(style='margin-top: 33px') Cancel your contribution
			p.
				If you cancel your contribution your membership will
				terminate at the end of your current payment cycle.
			a( href="/profile/direct-debit/cancel-subscription" ).btn.btn-danger.outline Cancel contribution
